(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{27:function(e,t,s){},29:function(e,t,s){},31:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(22),o=s.n(a),r=(s(27),s(8)),i=s(4),l=s.n(i),h=s(7),d=s(5),j=(s(29),s(2)),b=s(3),u=function(e){var t=e.book,s=e.updateShelf;return Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:"",")")}}),Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsxs)("select",{onChange:function(e){return s(t,e.target.value)},value:t.shelf?t.shelf:"none",children:[Object(b.jsx)("option",{value:"moveTo",disabled:!0,children:"Move to..."}),[{id:1,shelfName:"currentlyReading",shelfDisplayName:"Currently Reading"},{id:2,shelfName:"wantToRead",shelfDisplayName:"Want to Read"},{id:3,shelfName:"read",shelfDisplayName:"Read"},{id:4,shelfName:"none",shelfDisplayName:"None"}].map((function(e){return Object(b.jsx)("option",{value:e.shelfName,children:e.shelfDisplayName},e.id)}))]})})]}),Object(b.jsx)("div",{className:"book-title",children:t.title}),Object(b.jsx)("div",{className:"book-authors",children:t.authors?t.authors:""})]})})},f=function(e){var t=e.shelfTitle,s=e.shelfType,n=e.books,c=e.updateShelf,a=n.filter((function(e){return e.shelf===s}));return Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:t}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:a.map((function(e){return Object(b.jsx)(u,{book:e,updateShelf:c},e.id)}))})})]})},p=s(9),O=function(e){var t=e.books,s=e.updateShelf;return Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("div",{className:"list-books-title",children:Object(b.jsx)("h1",{children:"MyReads"})}),Object(b.jsx)("div",{className:"list-books-content",children:Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{shelfTitle:"Currently Reading",shelfType:"currentlyReading",books:t,updateShelf:s}),Object(b.jsx)(f,{shelfTitle:"Want to Read",shelfType:"wantToRead",books:t,updateShelf:s}),Object(b.jsx)(f,{shelfTitle:"Read",shelfType:"read",books:t,updateShelf:s})]})}),Object(b.jsx)("div",{className:"open-search",children:Object(b.jsx)(p.b,{to:"/search",children:"Add a book"})})]})},x=s(19),m="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:k},N=function(e,t){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(x.a)(Object(x.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},y=function(e){var t=e.books,s=e.updateShelf,c=Object(n.useState)(""),a=Object(d.a)(c,2),o=a[0],r=a[1],i=Object(n.useState)([]),j=Object(d.a)(i,2),f=j[0],O=j[1],x=function(){var e=Object(h.a)(l.a.mark((function e(t){var s,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=t.target.value,r(s),!s.trim()){e.next=10;break}return e.next=6,N(s);case 6:(n=e.sent).error?O([]):O(n),e.next=11;break;case 10:O([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"search-books",children:[Object(b.jsxs)("div",{className:"search-books-bar",children:[Object(b.jsx)(p.b,{to:"/",className:"close-search",children:"Close"}),Object(b.jsx)("div",{className:"search-books-input-wrapper",children:Object(b.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",onChange:x,value:o})})]}),Object(b.jsx)("div",{className:"search-books-results",children:Object(b.jsx)("ol",{className:"books-grid",children:f.length>0&&f.map((function(e){var n=t.find((function(t){return t.id===e.id}));return e.shelf=n?n.shelf:"none",Object(b.jsx)(u,{book:e,updateShelf:s},e.id)}))})})]})},g=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"404 Not Found"}),Object(b.jsx)("h3",{children:Object(b.jsx)(p.b,{to:"/",children:"Home"})})]})};var S=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),s=t[0],c=t[1];Object(n.useEffect)((function(){var e=!0,t=function(){var e=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/books"),{headers:v}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e&&t(),function(){e=!1}}),[]);var a=function(e,t){e.shelf=t,function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(x.a)(Object(x.a)({},v),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t).then((function(){c([].concat(Object(r.a)(s.filter((function(t){return t.id!==e.id}))),[e]))}))};return Object(b.jsx)("div",{className:"app",children:Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{path:"/search",element:Object(b.jsx)(y,{books:s,updateShelf:a})}),Object(b.jsx)(j.a,{exact:!0,path:"/",element:Object(b.jsx)(O,{books:s,updateShelf:a})}),Object(b.jsx)(j.a,{path:"*",element:Object(b.jsx)(g,{})})]})})};o.a.render(Object(b.jsx)(p.a,{children:Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(S,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.fbc74d45.chunk.js.map